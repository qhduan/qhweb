(function(){var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:c,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:c,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:c,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};e.bullet=/(?:[*+-]|\d+\.)/;e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;e.item=l(e.item,"gm")(/bull/g,e.bullet)();e.list=l(e.list)(/bull/g,e.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+e.def.source+")")();e.blockquote=l(e.blockquote)("def",e.def)();e._tag="(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code"+"|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo"+"|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b";e.html=l(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)();e.paragraph=l(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)();e.normal=u({},e);e.gfm=u({},e.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/});e.gfm.paragraph=l(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|"+e.list.source.replace("\\1","\\3")+"|")();e.tables=u({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});function t(t){this.tokens=[];this.tokens.links={};this.options=t||f.defaults;this.rules=e.normal;if(this.options.gfm){if(this.options.tables){this.rules=e.tables}else{this.rules=e.gfm}}}t.rules=e;t.lex=function(e,n){var i=new t(n);return i.lex(e)};t.prototype.lex=function(e){e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(e,true)};t.prototype.token=function(t,n,i){var t=t.replace(/^ +$/gm,""),r,s,o,a,l,c,u,f,h;while(t){if(o=this.rules.newline.exec(t)){t=t.substring(o[0].length);if(o[0].length>1){this.tokens.push({type:"space"})}}if(o=this.rules.code.exec(t)){t=t.substring(o[0].length);o=o[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:!this.options.pedantic?o.replace(/\n+$/,""):o});continue}if(o=this.rules.fences.exec(t)){t=t.substring(o[0].length);this.tokens.push({type:"code",lang:o[2],text:o[3]});continue}if(o=this.rules.heading.exec(t)){t=t.substring(o[0].length);this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});continue}if(n&&(o=this.rules.nptable.exec(t))){t=t.substring(o[0].length);c={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")};for(f=0;f<c.align.length;f++){if(/^ *-+: *$/.test(c.align[f])){c.align[f]="right"}else if(/^ *:-+: *$/.test(c.align[f])){c.align[f]="center"}else if(/^ *:-+ *$/.test(c.align[f])){c.align[f]="left"}else{c.align[f]=null}}for(f=0;f<c.cells.length;f++){c.cells[f]=c.cells[f].split(/ *\| */)}this.tokens.push(c);continue}if(o=this.rules.lheading.exec(t)){t=t.substring(o[0].length);this.tokens.push({type:"heading",depth:o[2]==="="?1:2,text:o[1]});continue}if(o=this.rules.hr.exec(t)){t=t.substring(o[0].length);this.tokens.push({type:"hr"});continue}if(o=this.rules.blockquote.exec(t)){t=t.substring(o[0].length);this.tokens.push({type:"blockquote_start"});o=o[0].replace(/^ *> ?/gm,"");this.token(o,n,true);this.tokens.push({type:"blockquote_end"});continue}if(o=this.rules.list.exec(t)){t=t.substring(o[0].length);a=o[2];this.tokens.push({type:"list_start",ordered:a.length>1});o=o[0].match(this.rules.item);r=false;h=o.length;f=0;for(;f<h;f++){c=o[f];u=c.length;c=c.replace(/^ *([*+-]|\d+\.) +/,"");if(~c.indexOf("\n ")){u-=c.length;c=!this.options.pedantic?c.replace(new RegExp("^ {1,"+u+"}","gm"),""):c.replace(/^ {1,4}/gm,"")}if(this.options.smartLists&&f!==h-1){l=e.bullet.exec(o[f+1])[0];if(a!==l&&!(a.length>1&&l.length>1)){t=o.slice(f+1).join("\n")+t;f=h-1}}s=r||/\n\n(?!\s*$)/.test(c);if(f!==h-1){r=c.charAt(c.length-1)==="\n";if(!s)s=r}this.tokens.push({type:s?"loose_item_start":"list_item_start"});this.token(c,false,i);this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"});continue}if(o=this.rules.html.exec(t)){t=t.substring(o[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:o[1]==="pre"||o[1]==="script"||o[1]==="style",text:o[0]});continue}if(!i&&n&&(o=this.rules.def.exec(t))){t=t.substring(o[0].length);this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};continue}if(n&&(o=this.rules.table.exec(t))){t=t.substring(o[0].length);c={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(f=0;f<c.align.length;f++){if(/^ *-+: *$/.test(c.align[f])){c.align[f]="right"}else if(/^ *:-+: *$/.test(c.align[f])){c.align[f]="center"}else if(/^ *:-+ *$/.test(c.align[f])){c.align[f]="left"}else{c.align[f]=null}}for(f=0;f<c.cells.length;f++){c.cells[f]=c.cells[f].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this.tokens.push(c);continue}if(n&&(o=this.rules.paragraph.exec(t))){t=t.substring(o[0].length);this.tokens.push({type:"paragraph",text:o[1].charAt(o[1].length-1)==="\n"?o[1].slice(0,-1):o[1]});continue}if(o=this.rules.text.exec(t)){t=t.substring(o[0].length);this.tokens.push({type:"text",text:o[0]});continue}if(t){throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}}return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:c,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:c,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};n._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/;n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;n.link=l(n.link)("inside",n._inside)("href",n._href)();n.reflink=l(n.reflink)("inside",n._inside)();n.normal=u({},n);n.pedantic=u({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});n.gfm=u({},n.normal,{escape:l(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:l(n.text)("]|","~]|")("|","|https?://|")()});n.breaks=u({},n.gfm,{br:l(n.br)("{2,}","*")(),text:l(n.gfm.text)("{2,}","*")()});function i(e,t){this.options=t||f.defaults;this.links=e;this.rules=n.normal;this.renderer=this.options.renderer||new r;this.renderer.options=this.options;if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=n.breaks}else{this.rules=n.gfm}}else if(this.options.pedantic){this.rules=n.pedantic}}i.rules=n;i.output=function(e,t,n){var r=new i(t,n);return r.output(e)};i.prototype.output=function(e){var t="",n,i,r,s;while(e){if(s=this.rules.escape.exec(e)){e=e.substring(s[0].length);t+=s[1];continue}if(s=this.rules.autolink.exec(e)){e=e.substring(s[0].length);if(s[2]==="@"){i=s[1].charAt(6)===":"?this.mangle(s[1].substring(7)):this.mangle(s[1]);r=this.mangle("mailto:")+i}else{i=o(s[1]);r=i}t+=this.renderer.link(r,null,i);continue}if(!this.inLink&&(s=this.rules.url.exec(e))){e=e.substring(s[0].length);i=o(s[1]);r=i;t+=this.renderer.link(r,null,i);continue}if(s=this.rules.tag.exec(e)){if(!this.inLink&&/^<a /i.test(s[0])){this.inLink=true}else if(this.inLink&&/^<\/a>/i.test(s[0])){this.inLink=false}e=e.substring(s[0].length);t+=this.options.sanitize?o(s[0]):s[0];continue}if(s=this.rules.link.exec(e)){e=e.substring(s[0].length);this.inLink=true;t+=this.outputLink(s,{href:s[2],title:s[3]});this.inLink=false;continue}if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){e=e.substring(s[0].length);n=(s[2]||s[1]).replace(/\s+/g," ");n=this.links[n.toLowerCase()];if(!n||!n.href){t+=s[0].charAt(0);e=s[0].substring(1)+e;continue}this.inLink=true;t+=this.outputLink(s,n);this.inLink=false;continue}if(s=this.rules.strong.exec(e)){e=e.substring(s[0].length);t+=this.renderer.strong(this.output(s[2]||s[1]));continue}if(s=this.rules.em.exec(e)){e=e.substring(s[0].length);t+=this.renderer.em(this.output(s[2]||s[1]));continue}if(s=this.rules.code.exec(e)){e=e.substring(s[0].length);t+=this.renderer.codespan(o(s[2],true));continue}if(s=this.rules.br.exec(e)){e=e.substring(s[0].length);t+=this.renderer.br();continue}if(s=this.rules.del.exec(e)){e=e.substring(s[0].length);t+=this.renderer.del(this.output(s[1]));continue}if(s=this.rules.text.exec(e)){e=e.substring(s[0].length);t+=o(this.smartypants(s[0]));continue}if(e){throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}}return t};i.prototype.outputLink=function(e,t){var n=o(t.href),i=t.title?o(t.title):null;return e[0].charAt(0)!=="!"?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,o(e[1]))};i.prototype.smartypants=function(e){if(!this.options.smartypants)return e;return e.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")};i.prototype.mangle=function(e){var t="",n=e.length,i=0,r;for(;i<n;i++){r=e.charCodeAt(i);if(Math.random()>.5){r="x"+r.toString(16)}t+="&#"+r+";"}return t};function r(e){this.options=e||{}}r.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);if(i!=null&&i!==e){n=true;e=i}}if(!t){return"<pre><code>"+(n?e:o(e,true))+"\n</code></pre>"}return'<pre><code class="'+this.options.langPrefix+o(t,true)+'">'+(n?e:o(e,true))+"\n</code></pre>\n"};r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"};r.prototype.html=function(e){return e};r.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"};r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"};r.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"};r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"};r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"};r.prototype.table=function(e,t){return"<table>\n"+"<thead>\n"+e+"</thead>\n"+"<tbody>\n"+t+"</tbody>\n"+"</table>\n"};r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"};r.prototype.tablecell=function(e,t){var n=t.header?"th":"td";var i=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return i+e+"</"+n+">\n"};r.prototype.strong=function(e){return"<strong>"+e+"</strong>"};r.prototype.em=function(e){return"<em>"+e+"</em>"};r.prototype.codespan=function(e){return"<code>"+e+"</code>"};r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"};r.prototype.del=function(e){return"<del>"+e+"</del>"};r.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(a(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(r){return""}if(i.indexOf("javascript:")===0){return""}}var s='<a href="'+e+'"';if(t){s+=' title="'+t+'"'}s+=">"+n+"</a>";return s};r.prototype.image=function(e,t,n){var i='<img src="'+e+'" alt="'+n+'"';if(t){i+=' title="'+t+'"'}i+=this.options.xhtml?"/>":">";return i};function s(e){this.tokens=[];this.token=null;this.options=e||f.defaults;this.options.renderer=this.options.renderer||new r;this.renderer=this.options.renderer;this.renderer.options=this.options}s.parse=function(e,t,n){var i=new s(t,n);return i.parse(e)};s.prototype.parse=function(e){this.inline=new i(e.links,this.options,this.renderer);this.tokens=e.reverse();var t="";while(this.next()){t+=this.tok()}return t};s.prototype.next=function(){return this.token=this.tokens.pop()};s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};s.prototype.parseText=function(){var e=this.token.text;while(this.peek().type==="text"){e+="\n"+this.next().text}return this.inline.output(e)};s.prototype.tok=function(){switch(this.token.type){case"space":{return""}case"hr":{return this.renderer.hr()}case"heading":{return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text)}case"code":{return this.renderer.code(this.token.text,this.token.lang,this.token.escaped)}case"table":{var e="",t="",n,i,r,s,o;r="";for(n=0;n<this.token.header.length;n++){s={header:true,align:this.token.align[n]};r+=this.renderer.tablecell(this.inline.output(this.token.header[n]),{header:true,align:this.token.align[n]})}e+=this.renderer.tablerow(r);for(n=0;n<this.token.cells.length;n++){i=this.token.cells[n];r="";for(o=0;o<i.length;o++){r+=this.renderer.tablecell(this.inline.output(i[o]),{header:false,align:this.token.align[o]})}t+=this.renderer.tablerow(r)}return this.renderer.table(e,t)}case"blockquote_start":{var t="";while(this.next().type!=="blockquote_end"){t+=this.tok()}return this.renderer.blockquote(t)}case"list_start":{var t="",a=this.token.ordered;while(this.next().type!=="list_end"){t+=this.tok()}return this.renderer.list(t,a)}case"list_item_start":{var t="";while(this.next().type!=="list_item_end"){t+=this.token.type==="text"?this.parseText():this.tok()}return this.renderer.listitem(t)}case"loose_item_start":{var t="";while(this.next().type!=="list_item_end"){t+=this.tok()}return this.renderer.listitem(t)}case"html":{var l=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;return this.renderer.html(l)}case"paragraph":{return this.renderer.paragraph(this.inline.output(this.token.text))}case"text":{return this.renderer.paragraph(this.parseText())}}};function o(e,t){return e.replace(!t?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(e){return e.replace(/&([#\w]+);/g,function(e,t){t=t.toLowerCase();if(t==="colon")return":";if(t.charAt(0)==="#"){return t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1))}return""})}function l(e,t){e=e.source;t=t||"";return function n(i,r){if(!i)return new RegExp(e,t);r=r.source||r;r=r.replace(/(^|[^\[])\^/g,"$1");e=e.replace(i,r);return n}}function c(){}c.exec=c;function u(e){var t=1,n,i;for(;t<arguments.length;t++){n=arguments[t];for(i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}return e}function f(e,n,i){if(i||typeof n==="function"){if(!i){i=n;n=null}n=u({},f.defaults,n||{});var r=n.highlight,a,l,c=0;try{a=t.lex(e,n)}catch(h){return i(h)}l=a.length;var p=function(e){if(e){n.highlight=r;return i(e)}var t;try{t=s.parse(a,n)}catch(o){e=o}n.highlight=r;return e?i(e):i(null,t)};if(!r||r.length<3){return p()}delete n.highlight;if(!l)return p();for(;c<a.length;c++){(function(e){if(e.type!=="code"){return--l||p()}return r(e.text,e.lang,function(t,n){if(t)return p(t);if(n==null||n===e.text){return--l||p()}e.text=n;e.escaped=true;--l||p()})})(a[c])}return}try{if(n)n=u({},f.defaults,n);return s.parse(t.lex(e,n),n)}catch(h){h.message+="\nPlease report this to https://github.com/chjj/marked.";if((n||f.defaults).silent){return"<p>An error occured:</p><pre>"+o(h.message+"",true)+"</pre>"}throw h}}f.options=f.setOptions=function(e){u(f.defaults,e);return f};f.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,smartLists:false,silent:false,highlight:null,langPrefix:"lang-",smartypants:false,headerPrefix:"",renderer:new r,xhtml:false};f.Parser=s;f.parser=s.parse;f.Renderer=r;f.Lexer=t;f.lexer=t.lex;f.InlineLexer=i;f.inlineLexer=i.output;f.parse=f;if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=f}else if(typeof define==="function"&&define.amd){define(function(){return f})}else{this.marked=f}}).call(function(){return this||(typeof window!=="undefined"?window:global)}());var Markdown={};(function(){function e(e){return e}function t(e){return false}function n(){}n.prototype={chain:function(t,n){var i=this[t];if(!i)throw new Error("unknown hook "+t);if(i===e)this[t]=n;else this[t]=function(e){var t=Array.prototype.slice.call(arguments,0);t[0]=i.apply(null,t);return n.apply(null,t)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(t){this[t]=e},addFalse:function(e){this[e]=t}};Markdown.HookCollection=n})();(function(){var e={},t={},n={},i=window.document,r=window.RegExp,s=window.navigator,o={lineLength:72},a={isIE:/msie/.test(s.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(s.userAgent.toLowerCase())||/msie 5/.test(s.userAgent.toLowerCase()),isOpera:/opera/.test(s.userAgent.toLowerCase())};var l={bold:"Strong <strong>",boldexample:"strong text",italic:"Emphasis <em>",italicexample:"emphasized text",link:"Hyperlink <a>",linkdescription:"enter link description here",linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',quote:"Blockquote <blockquote>",quoteexample:"Blockquote",code:"Code Sample <pre><code>",codeexample:"enter code here",image:"Image <img>",imagedescription:"enter image description here",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",olist:"Numbered List <ol>",ulist:"Bulleted List <ul>",litem:"List item",heading:"Heading <h1>/<h2>",headingexample:"Heading",hr:"Horizontal Rule <hr>",undo:"Undo -",redo:"Redo -",help:"Markdown Editing Help"};var c={bold:{win:"Ctrl-B",mac:"Command-B|Ctrl-B"},italic:{win:"Ctrl-I",mac:"Command-I|Ctrl-I"},link:{win:"Ctrl-L",mac:"Command-L|Ctrl-L"},quote:{win:"Ctrl-Q",mac:"Command-Q|Ctrl-Q"},code:{win:"Ctrl-K",mac:"Command-K|Ctrl-K"},image:{win:"Ctrl-G",mac:"Command-G|Ctrl-G"},olist:{win:"Ctrl-O",mac:"Command-O|Ctrl-O"},ulist:{win:"Ctrl-U",mac:"Command-U|Ctrl-U"},heading:{win:"Ctrl-H",mac:"Command-H|Ctrl-H"},hr:{win:"Ctrl-R",mac:"Command-R|Ctrl-R"},undo:{win:"Ctrl-Z",mac:"Command-Z"},redo:{win:"Ctrl-Y|Ctrl-Shift-Z",mac:"Command-Y|Command-Shift-Z"}};var u="http://";var f="http://";Markdown.Editor=function(e,t,n){n=n||{};if(typeof n.handler==="function"){n={helpButton:n}}n.strings=n.strings||{};if(n.helpButton){n.strings.help=n.strings.help||n.helpButton.title}if(n.keyStrokes){for(var i in n.keyStrokes){c[i]=n.keyStrokes[i]}}var r=function(e){return n.strings[e]||l[e]};t=t||"";var s=this.hooks=new Markdown.HookCollection;s.addNoop("onPreviewRefresh");s.addNoop("postBlockquoteCreation");s.addFalse("insertImageDialog");s.addFalse("insertLinkDialog");this.getConverter=function(){return e};var o=this,a;var u;this.run=function(i,l){if(a)return;a=new p(t,i);var f=new b(s,r);var h=new g(e,a,function(){s.onPreviewRefresh()},l);var d;var v=typeof require!=="undefined"?require("ace/lib/useragent"):ace.require("ace/lib/useragent");var k=function(e){var t=c[e][v.isMac?"mac":"win"];var n=t.indexOf("|");return t.substring(0,n>0?n:t.length)};d=new m(t,a,u,h,f,n.helpButton,r,k);d.setUndoRedoButtonStates();var x=o.refreshPreview=function(){h.refresh(true)};x();o.uiManager=d}};function h(){}h.prototype.findTags=function(t,n){var i=this;var r;if(t){r=e.extendRegExp(t,"","$");this.before=this.before.replace(r,function(e){i.startTag=i.startTag+e;return""});r=e.extendRegExp(t,"^","");this.selection=this.selection.replace(r,function(e){i.startTag=i.startTag+e;return""})}if(n){r=e.extendRegExp(n,"","$");this.selection=this.selection.replace(r,function(e){i.endTag=e+i.endTag;return""});r=e.extendRegExp(n,"^","");this.after=this.after.replace(r,function(e){i.endTag=e+i.endTag;return""})}};h.prototype.trimWhitespace=function(e){var t,n,i=this;if(e){t=n=""}else{t=function(e){i.before+=e;return""};n=function(e){i.after=e+i.after;return""}}this.selection=this.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,n)};h.prototype.skipLines=function(e,t,n){if(e===undefined){e=1}if(t===undefined){t=1}e++;t++;var i;var s;if(navigator.userAgent.match(/Chrome/)){"X".match(/()./)}this.selection=this.selection.replace(/(^\n*)/,"");this.startTag=this.startTag+r.$1;this.selection=this.selection.replace(/(\n*$)/,"");this.endTag=this.endTag+r.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before=this.before+r.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after=this.after+r.$1;if(this.before){i=s="";while(e--){i+="\\n?";s+="\n"}if(n){i="\\n*"}this.before=this.before.replace(new r(i+"$",""),s)}if(this.after){i=s="";while(t--){i+="\\n?";s+="\n"}if(n){i="\\n*"}this.after=this.after.replace(new r(i,""),s)}};function p(e,t){this.buttonBar=i.getElementById("wmd-button-bar"+e);this.preview=i.getElementById("wmd-preview"+e);this.input=t}e.isVisible=function(e){if(window.getComputedStyle){return window.getComputedStyle(e,null).getPropertyValue("display")!=="none"}else if(e.currentStyle){return e.currentStyle["display"]!=="none"}};e.addEvent=function(e,t,n){if(e.attachEvent){e.attachEvent("on"+t,n)}else{e.addEventListener(t,n,false)}};e.removeEvent=function(e,t,n){if(e.detachEvent){e.detachEvent("on"+t,n)}else{e.removeEventListener(t,n,false)}};e.fixEolChars=function(e){e=e.replace(/\r\n/g,"\n");e=e.replace(/\r/g,"\n");return e};e.extendRegExp=function(e,t,n){if(t===null||t===undefined){t=""}if(n===null||n===undefined){n=""}var i=e.toString();var s;i=i.replace(/\/([gim]*)$/,function(e,t){s=t;return""});i=i.replace(/(^\/|\/$)/g,"");i=t+i+n;return new r(i,s)};t.getTop=function(e,t){var n=e.offsetTop;if(!t){while(e=e.offsetParent){n+=e.offsetTop}}return n};t.getHeight=function(e){return e.offsetHeight||e.scrollHeight};t.getWidth=function(e){return e.offsetWidth||e.scrollWidth};t.getPageSize=function(){var e,t;var n,r;if(self.innerHeight&&self.scrollMaxY){e=i.body.scrollWidth;t=self.innerHeight+self.scrollMaxY}else if(i.body.scrollHeight>i.body.offsetHeight){e=i.body.scrollWidth;t=i.body.scrollHeight}else{e=i.body.offsetWidth;t=i.body.offsetHeight}if(self.innerHeight){n=self.innerWidth;r=self.innerHeight}else if(i.documentElement&&i.documentElement.clientHeight){n=i.documentElement.clientWidth;r=i.documentElement.clientHeight}else if(i.body){n=i.body.clientWidth;r=i.body.clientHeight}var s=Math.max(e,n);var o=Math.max(t,r);return[s,o,n,r]};function d(e,t){var n=this;var i=e.input;this.init=function(){var e=typeof require!=="undefined"?require("ace/range").Range:ace.require("ace/range").Range;(function(t){n.before=i.session.getTextRange(new e(0,0,t.start.row,t.start.column));n.selection=i.session.getTextRange();n.after=i.session.getTextRange(new e(t.end.row,t.end.column,Number.MAX_VALUE,Number.MAX_VALUE))})(i.selection.getRange());this.text=[this.before,this.selection,this.after].join("");this.length=this.text.length;this.setInputAreaSelectionStartEnd();this.scrollTop=i.renderer.getScrollTop()};this.setInputAreaSelection=function(){var e=typeof require!=="undefined"?require("ace/range").Range:ace.require("ace/range").Range;i.selection.setSelectionRange(function(t,n){return new e(t.row,t.column,n.row,n.column)}(i.session.doc.indexToPosition(n.start),i.session.doc.indexToPosition(n.end)));i.renderer.scrollToY(n.scrollTop);i.focus()};this.setInputAreaSelectionStartEnd=function(){n.start=n.before.length;n.end=n.after.length};this.restore=function(){var e=0;var t=n.before.length;while(e<t){if(n.before.charCodeAt(e)!==n.text.charCodeAt(e))break;e++}var r=0;var s=n.after.length;var o=n.after.length-1;var a=n.text.length-1;while(r<s){if(n.after.charCodeAt(o-r)!==n.text.charCodeAt(a-r))break;r++}var l=typeof require!=="undefined"?require("ace/range").Range:ace.require("ace/range").Range;var c=function(e,t){return new l(e.row,e.column,t.row,t.column)}(i.session.doc.indexToPosition(e),i.session.doc.indexToPosition(n.length-r));i.session.replace(c,n.text.substring(e,a-r+1));this.setInputAreaSelection()};this.getChunks=function(){var e=new h;e.before=n.before;e.startTag="";e.selection=n.selection;e.endTag="";e.after=n.after;e.scrollTop=n.scrollTop;return e};this.setChunks=function(e){e.before=e.before+e.startTag;e.after=e.endTag+e.after;this.start=e.before.length;this.end=e.before.length+e.selection.length;this.text=e.before+e.selection+e.after;this.scrollTop=e.scrollTop};this.init()}function g(e,n,r,s){var o=this;var l;var c;var u;var f=3e3;var h="manual";var p=function(){var e=0;if(window.innerHeight){e=window.pageYOffset}else if(i.documentElement&&i.documentElement.scrollTop){e=i.documentElement.scrollTop}else if(i.body){e=i.body.scrollTop}return e};var d=function(){if(!n.preview)return;var t=n.input.getValue();if(t&&t==u){return}else{u=t}var i=(new Date).getTime();t=e.makeHtml(t);var r=(new Date).getTime();c=r-i;T(t)};if(s!==undefined){d=s(d)}var g=function(){if(l){clearTimeout(l);l=undefined}if(h!=="manual"){var e=0;if(h==="delayed"){e=c}if(e>f){e=f}l=setTimeout(d,e)}};var m=function(e){if(e.scrollHeight<=e.clientHeight){return 1}return e.scrollTop/(e.scrollHeight-e.clientHeight)};var b=function(){if(n.preview){n.preview.scrollTop=(n.preview.scrollHeight-n.preview.clientHeight)*m(n.preview)}};this.refresh=function(e){if(e){u="";d()}else{g()}};this.processingTime=function(){return c};var v=true;var k=function(e){var t=n.preview;var i=t.parentNode;var r=t.nextSibling;i.removeChild(t);t.innerHTML=e;if(!r)i.appendChild(t);else i.insertBefore(t,r)};var x=function(e){n.preview.innerHTML=e};var w;var y=function(e){if(w)return w(e);try{x(e);w=x}catch(t){w=k;w(e)}};var T=function(e){var i=t.getTop(n.input)-p();if(n.preview){y(e);r()}b();if(v){v=false;return}var s=t.getTop(n.input)-p();if(a.isIE){setTimeout(function(){window.scrollBy(0,s-i)},0)}else{window.scrollBy(0,s-i)}};var C=function(){n.input.session.on("change",g);if(n.preview){n.preview.scrollTop=0}};C()}n.createBackground=function(){var e=i.createElement("div"),n=e.style;e.className="wmd-prompt-background";n.position="absolute";n.top="0";n.zIndex="1000";if(a.isIE){n.filter="alpha(opacity=50)"}else{n.opacity="0.5"}var r=t.getPageSize();n.height=r[1]+"px";if(a.isIE){n.left=i.documentElement.scrollLeft;n.width=i.documentElement.clientWidth}else{n.left="0";n.width="100%"}i.body.appendChild(e);return e};n.prompt=function(n,r,s){var o;var l;if(r===undefined){r=""}var c=function(e){var t=e.charCode||e.keyCode;if(t===27){u(true)}};var u=function(t){e.removeEvent(i.body,"keydown",c);var n=l.value;if(t){n=null}else{n=n.replace(/^http:\/\/(https?|ftp):\/\//,"$1://");if(!/^(?:https?|ftp):\/\//.test(n))n="http://"+n}o.parentNode.removeChild(o);s(n);return false};var f=function(){o=i.createElement("div");o.className="wmd-prompt-dialog";o.style.padding="10px;";o.style.position="fixed";o.style.width="400px";o.style.zIndex="1001";var s=i.createElement("div");s.innerHTML=n;s.style.padding="5px";o.appendChild(s);var f=i.createElement("form"),h=f.style;f.onsubmit=function(){return u(false)};h.padding="0";h.margin="0";h.cssFloat="left";h.width="100%";h.textAlign="center";h.position="relative";o.appendChild(f);l=i.createElement("input");l.type="text";l.value=r;h=l.style;h.display="block";h.width="80%";h.marginLeft=h.marginRight="auto";f.appendChild(l);var p=i.createElement("input");p.type="button";p.onclick=function(){return u(false)};p.value="确定";p.className="btn btn-defult btn-sm";h=p.style;h.margin="10px";h.display="inline";h.width="7em";var d=i.createElement("input");d.type="button";d.onclick=function(){return u(true)};d.value="取消";d.className="btn btn-defult btn-sm";h=d.style;h.margin="10px";h.display="inline";h.width="7em";f.appendChild(p);f.appendChild(d);e.addEvent(i.body,"keydown",c);o.style.top="50%";o.style.left="50%";o.style.display="block";if(a.isIE_5or6){o.style.position="absolute";o.style.top=i.documentElement.scrollTop+200+"px";o.style.left="50%"}i.body.appendChild(o);o.style.marginTop=-(t.getHeight(o)/2)+"px";o.style.marginLeft=-(t.getWidth(o)/2)+"px"};setTimeout(function(){f();var e=r.length;if(l.selectionStart!==undefined){l.selectionStart=0;l.selectionEnd=e}else if(l.createTextRange){var t=l.createTextRange();t.collapse(false);t.moveStart("character",-e);t.moveEnd("character",e);t.select()}l.focus()},0)};function m(e,t,n,r,s,o,l,u){var f=function(e){return l(e)+" "+u(e)};var h=t.input,p={};this.setUndoRedoButtonStates=function(){setTimeout(function(){k(p.undo,h.session.getUndoManager().hasUndo());k(p.redo,h.session.getUndoManager().hasRedo())},50)};var g=this;w();var m="keydown";if(a.isOpera){m="keypress"}function b(e){if(e.length===0){return}var t=e.pop();h.commands.addCommand({name:l(t),bindKey:c[t],exec:function(e){v(p[t])}});b(e)}b(["bold","italic","link","quote","code","image","olist","ulist","heading","hr"]);function v(e){h.focus();var i=e.id=="wmd-link-button"||e.id=="wmd-image-button";if(e.textOp){if(n&&!i){n.setCommandMode()}var s=new d(t);if(!s){return}var o=s.getChunks();var a=function(){h.focus();if(o){s.setChunks(o)}s.restore();r.refresh()};var l=e.textOp(o,a);if(!l){a()}}if(e.execute){e.execute(n)}}function k(e,n){var r="0px";var s="-20px";var o="-40px";var l=e.getElementsByTagName("span")[0];e.className=e.className.replace(/ disabled/g,"");if(n){l.style.backgroundPosition=e.XShift+" "+r;e.onmouseover=function(){l.style.backgroundPosition=this.XShift+" "+o};e.onmouseout=function(){l.style.backgroundPosition=this.XShift+" "+r};if(a.isIE){e.onmousedown=function(){if(i.activeElement&&i.activeElement!==t.input){return}t.ieCachedRange=document.selection.createRange();t.ieCachedScrollTop=t.input.renderer.getScrollTop()}}if(!e.isHelp){e.onclick=function(){if(this.onmouseout){this.onmouseout()}v(this);return false}}}else{l.style.backgroundPosition=e.XShift+" "+s;e.onmouseover=e.onmouseout=e.onclick=function(){};e.className+=" disabled"}}function x(e){if(typeof e==="string")e=s[e];return function(){e.apply(s,arguments)}}function w(){var n=t.buttonBar;var i="0px";var r="-20px";var s="-40px";var a=document.createElement("ul");a.id="wmd-button-row"+e;a.className="wmd-button-row";a=n.appendChild(a);var c=0;var u=function(t,n,i,r){var s=document.createElement("li");s.className="wmd-button";s.style.left=c+"px";c+=25;var o=document.createElement("span");s.id=t+e;s.appendChild(o);s.title=n;s.XShift=i;if(r)s.textOp=r;k(s,true);a.appendChild(s);return s};var d=function(t){var n=document.createElement("li");n.className="wmd-spacer wmd-spacer"+t;n.id="wmd-spacer"+t+e;a.appendChild(n);c+=25};p.bold=u("wmd-bold-button",f("bold"),"0px",x("doBold"));p.italic=u("wmd-italic-button",f("italic"),"-20px",x("doItalic"));d(1);p.link=u("wmd-link-button",f("link"),"-40px",x(function(e,t){return this.doLinkOrImage(e,t,false)}));p.quote=u("wmd-quote-button",f("quote"),"-60px",x("doBlockquote"));p.code=u("wmd-code-button",f("code"),"-80px",x("doCode"));p.image=u("wmd-image-button",f("image"),"-100px",x(function(e,t){return this.doLinkOrImage(e,t,true)}));d(2);p.olist=u("wmd-olist-button",f("olist"),"-120px",x(function(e,t){this.doList(e,t,true)}));p.ulist=u("wmd-ulist-button",f("ulist"),"-140px",x(function(e,t){this.doList(e,t,false)}));p.heading=u("wmd-heading-button",f("heading"),"-160px",x("doHeading"));p.hr=u("wmd-hr-button",f("hr"),"-180px",x("doHorizontalRule"));d(3);p.undo=u("wmd-undo-button",f("undo"),"-200px",null);p.undo.execute=function(e){h.session.getUndoManager().undo()};p.redo=u("wmd-redo-button",f("redo"),"-220px",null);p.redo.execute=function(e){h.session.getUndoManager().redo()};if(o){var m=document.createElement("li");var b=document.createElement("span");m.appendChild(b);m.className="wmd-button wmd-help-button";m.id="wmd-help-button"+e;m.XShift="-240px";m.isHelp=true;m.style.right="0px";m.title=l("help");m.onclick=o.handler;k(m,true);a.appendChild(m);p.help=m}g.setUndoRedoButtonStates();h.session.on("change",function(){g.setUndoRedoButtonStates()})}this.buttons=p;this.setButtonState=k}function b(e,t){this.hooks=e;
this.getString=t}var v=b.prototype;v.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";v.unwrap=function(e){var t=new r("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");e.selection=e.selection.replace(t,"$1 $2")};v.wrap=function(e,t){this.unwrap(e);var n=new r("(.{1,"+t+"})( +|$\\n?)","gm"),i=this;e.selection=e.selection.replace(n,function(e,t){if(new r("^"+i.prefixes,"").test(e)){return e}return t+"\n"});e.selection=e.selection.replace(/\s+$/,"")};v.doBold=function(e,t){return this.doBorI(e,t,2,this.getString("boldexample"))};v.doItalic=function(e,t){return this.doBorI(e,t,1,this.getString("italicexample"))};v.doBorI=function(e,t,n,i){e.trimWhitespace();e.selection=e.selection.replace(/\n{2,}/g,"\n");var s=/(\**$)/.exec(e.before)[0];var o=/(^\**)/.exec(e.after)[0];var a=Math.min(s.length,o.length);if(a>=n&&(a!=2||n!=1)){e.before=e.before.replace(r("[*]{"+n+"}$",""),"");e.after=e.after.replace(r("^[*]{"+n+"}",""),"")}else if(!e.selection&&o){e.after=e.after.replace(/^([*_]*)/,"");e.before=e.before.replace(/(\s?)$/,"");var l=r.$1;e.before=e.before+o+l}else{if(!e.selection&&!o){e.selection=i}var c=n<=1?"*":"**";e.before=e.before+c;e.after=c+e.after}return};v.stripLinkDefs=function(e,t){e=e.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(e,n,i,r,s){t[n]=e.replace(/\s*$/,"");if(r){t[n]=e.replace(/["(](.+?)[")]$/,"");return r+s}return""});return e};v.addLinkDef=function(e,t){var n=0;var i={};e.before=this.stripLinkDefs(e.before,i);e.selection=this.stripLinkDefs(e.selection,i);e.after=this.stripLinkDefs(e.after,i);var r="";var s=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g;var o=function(e){n++;e=e.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+n+"]:");r+="\n"+e};var a=function(e,t,r,l,c,u){r=r.replace(s,a);if(i[c]){o(i[c]);return t+r+l+n+u}return e};e.before=e.before.replace(s,a);if(t){o(t)}else{e.selection=e.selection.replace(s,a)}var l=n;e.after=e.after.replace(s,a);if(e.after){e.after=e.after.replace(/\n*$/,"")}if(!e.after){e.selection=e.selection.replace(/\n*$/,"")}e.after+="\n\n"+r;return l};function k(e){return e.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(e,t,n){t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g," ")});t=decodeURIComponent(t);t=encodeURI(t).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29");t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g,"%2b")});if(n){n=n.trim?n.trim():n.replace(/^\s*/,"").replace(/\s*$/,"");n=n.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return n?t+' "'+n+'"':t})}v.doLinkOrImage=function(e,t,i){e.trimWhitespace();e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var r;if(e.endTag.length>1&&e.startTag.length>0){e.startTag=e.startTag.replace(/!?\[/,"");e.endTag="";this.addLinkDef(e,null)}else{e.selection=e.startTag+e.selection+e.endTag;e.startTag=e.endTag="";if(/\n\n/.test(e.selection)){this.addLinkDef(e,null);return}var s=this;var o=function(n){r.parentNode.removeChild(r);if(n!==null){e.startTag=i?"![":"[";e.endTag="]("+n+")";if(!e.selection){if(i){e.selection=s.getString("imagedescription")}else{e.selection=s.getString("linkdescription")}}}t()};r=n.createBackground();if(i){if(!this.hooks.insertImageDialog(o))n.prompt(this.getString("imagedialog"),u,o)}else{if(!this.hooks.insertLinkDialog(o))n.prompt(this.getString("linkdialog"),f,o)}return true}};v.doAutoindent=function(e,t){var n=this,i=false;e.before=e.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");e.before=e.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");e.before=e.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");if(!e.selection&&!/^[ \t]*(?:\n|$)/.test(e.after)){e.after=e.after.replace(/^[^\n]*/,function(t){e.selection=t;return""});i=true}if(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(e.before)){if(n.doList){n.doList(e)}}if(/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(e.before)){if(n.doBlockquote){n.doBlockquote(e)}}if(/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)){if(n.doCode){n.doCode(e)}}if(i){e.after=e.selection+e.after;e.selection=""}};v.doBlockquote=function(e,t){e.selection=e.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(t,n,i,r){e.before+=n;e.after=r+e.after;return i});e.before=e.before.replace(/(>[ \t]*)$/,function(t,n){e.selection=n+e.selection;return""});e.selection=e.selection.replace(/^(\s|>)+$/,"");e.selection=e.selection||this.getString("quoteexample");var n="",i="",r;if(e.before){var s=e.before.replace(/\n$/,"").split("\n");var a=false;for(var l=0;l<s.length;l++){var c=false;r=s[l];a=a&&r.length>0;if(/^>/.test(r)){c=true;if(!a&&r.length>1)a=true}else if(/^[ \t]*$/.test(r)){c=true}else{c=a}if(c){n+=r+"\n"}else{i+=n+r;n="\n"}}if(!/(^|\n)>/.test(n)){i+=n;n=""}}e.startTag=n;e.before=i;var u=function(t){var n=t?"> ":"";if(e.startTag){e.startTag=e.startTag.replace(/\n((>|\s)*)\n$/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})}if(e.endTag){e.endTag=e.endTag.replace(/^\n((>|\s)*)\n/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})}};if(/^(?![ ]{0,3}>)/m.test(e.selection)){this.wrap(e,o.lineLength-2);e.selection=e.selection.replace(/^/gm,"> ");u(true);e.skipLines()}else{e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,"");this.unwrap(e);u(false);if(!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag){e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")}if(!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag){e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n")}}e.selection=this.hooks.postBlockquoteCreation(e.selection);if(!/\n/.test(e.selection)){e.selection=e.selection.replace(/^(> *)/,function(t,n){e.startTag+=n;return""})}};v.doCode=function(e,t){var n=/\S[ ]*$/.test(e.before);var i=/^[ ]*\S/.test(e.after);if(!i&&!n||/\n/.test(e.selection)){e.before=e.before.replace(/[ ]{4}$/,function(t){e.selection=t+e.selection;return""});var r=1;var s=1;if(/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)){r=0}if(/^\n(\t|[ ]{4,})/.test(e.after)){s=0}e.skipLines(r,s);if(!e.selection){e.startTag="    ";e.selection=this.getString("codeexample")}else{if(/^[ ]{0,3}\S/m.test(e.selection)){if(/\n/.test(e.selection))e.selection=e.selection.replace(/^/gm,"    ");else e.before+="    "}else{e.selection=e.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,"")}}}else{e.trimWhitespace();e.findTags(/`/,/`/);if(!e.startTag&&!e.endTag){e.startTag=e.endTag="`";if(!e.selection){e.selection=this.getString("codeexample")}}else if(e.endTag&&!e.startTag){e.before+=e.endTag;e.endTag=""}else{e.startTag=e.endTag=""}}};v.doList=function(e,t,n){var i=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/;var s=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/;var a="-";var l=1;var c=function(){var e;if(n){e=" "+l+". ";l++}else{e=" "+a+" "}return e};var u=function(e){if(n===undefined){n=/^\s*\d/.test(e)}e=e.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(e){return c()});return e};e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);if(e.before&&!/\n$/.test(e.before)&&!/^\n/.test(e.startTag)){e.before+=e.startTag;e.startTag=""}if(e.startTag){var f=/\d+[.]/.test(e.startTag);e.startTag="";e.selection=e.selection.replace(/\n[ ]{4}/g,"\n");this.unwrap(e);e.skipLines();if(f){e.after=e.after.replace(s,u)}if(n==f){return}}var h=1;e.before=e.before.replace(i,function(e){if(/^\s*([*+-])/.test(e)){a=r.$1}h=/[^\n]\n\n[^\n]/.test(e)?1:0;return u(e)});if(!e.selection){e.selection=this.getString("litem")}var p=c();var d=1;e.after=e.after.replace(s,function(e){d=/[^\n]\n\n[^\n]/.test(e)?1:0;return u(e)});e.trimWhitespace(true);e.skipLines(h,d,true);e.startTag=p;var g=p.replace(/./g," ");this.wrap(e,o.lineLength-g.length);e.selection=e.selection.replace(/\n/g,"\n"+g)};v.doHeading=function(e,t){e.selection=e.selection.replace(/\s+/g," ");e.selection=e.selection.replace(/(^\s+|\s+$)/g,"");if(!e.selection){e.startTag="## ";e.selection=this.getString("headingexample");e.endTag=" ##";return}var n=0;e.findTags(/#+[ ]*/,/[ ]*#+/);if(/#+/.test(e.startTag)){n=r.lastMatch.length}e.startTag=e.endTag="";e.findTags(null,/\s?(-+|=+)/);if(/=+/.test(e.endTag)){n=1}if(/-+/.test(e.endTag)){n=2}e.startTag=e.endTag="";e.skipLines(1,1);var i=n==0?2:n-1;if(i>0){var s=i>=2?"-":"=";var a=e.selection.length;if(a>o.lineLength){a=o.lineLength}if(a<3){a=3}e.endTag="\n";while(a--){e.endTag+=s}}};v.doHorizontalRule=function(e,t){e.startTag="----------\n";e.selection="";e.skipLines(2,1,true)}})();